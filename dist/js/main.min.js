function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);for(var a=0;limit_h>a;a++)for(i=0;limit_w>i;i++)ctx.strokeStyle="#000",ctx.lineWidth=1,ctx.fillStyle="transparent",ctx.strokeRect(i*scale*size+xOffset-width,a*scale*size+yOffset-height,scale*size-.5,scale*size-.5),ctx.fillRect(i*scale*size+xOffset-width,a*scale*size+yOffset-height,scale*size-.5,scale*size-.5);ctx.fillStyle="red",ctx.fillRect(10*scale*size+xOffset,10*scale*size+yOffset,scale*size,scale*size),ctx.fillStyle="blue",ctx.fillRect(5*scale*size+xOffsetObj,5*scale*size+yOffsetObj,scale*size,scale*size)}function loop(){time++,yOffset=yOffset%scale*size,xOffset=xOffset%scale*size,draw(),requestAnimationFrame(loop),scale=Math.sin(time)+1.5}function resetPos(){xOffset=0,yOffset=0,xOffsetObj=0,yOffsetObj=0}function ctrl(a){a.decrement=function(a){a.count-=1}}function Player(a){return this.name=a,this.accelLevel=0,this.laserLevel=0,this.shipPoints=48,this.victoryPoints=0,this.ships=[],this.chosen=!1,this.setLevels=function(a,b){this.accelLevel=a,this.laserLevel=b,this.chosen===!1&&(panel1count--,angular.element($("#panel1")).scope().techCtrl.showNext(),this.chosen=!0)},this}function nextPage(){var a=$("section.current"),b=$("section.current").nextAll().find("section").eq(0);a.removeClass("current").addClass("panel-left"),b.removeClass("panel-right").addClass("current")}var size=30,scale=1,a=document.getElementById("canvas"),ctx=a.getContext("2d"),width=window.innerWidth/2,height=window.innerHeight;a.width=width*scale,a.height=height*scale;var i,x,y;x=0,y=0;var time=0,xOffset=0,yOffset=0,xOffsetObj=0,yOffsetObj=0,mouseDown=!1,mousePosOld={x:0,y:0},mousePos={x:0,y:0},limit_h=3*height/scale*size,limit_w=3*width/scale*size;console.log(limit_h,limit_w),loop(),document.addEventListener("mousedown",function(a){mouseDown=!0,mousePosOld.x=a.clientX,mousePosOld.y=a.clientY}),document.addEventListener("mousemove",function(a){mousePosOld.x=a.clientX,mousePosOld.y=a.clientY,mouseDown&&(xOffset-=mousePos.x-mousePosOld.x,yOffset-=mousePos.y-mousePosOld.y,xOffsetObj-=mousePos.x-mousePosOld.x,yOffsetObj-=mousePos.y-mousePosOld.y),mousePos.x=a.clientX,mousePos.y=a.clientY}),document.addEventListener("mouseup",function(){mouseDown=!1});var app=angular.module("game",[]),accelLevel=[0,0],laserLevel=[0,0],ShipPoints=[48,48],vpoints=[0,'<marquee scrollamount="820">AAAAAARRRRRRGGGGGG!</marquee>'],sixpodShip=16,ninepodShip=32,twelvepodShip=48,ships={sixpod:{cost:18},ninepod:{cost:36},twelvepod:{cost:56}};players=[];var panel1count=players.length;app.controller("PlayerInitController",function(){this.playerName="",this.playerMessage="Add player",this.addPlayer=function(a){players.push(new Player(a)),this.playerName="",this.playerMessage="Add another player"}}),app.controller("ShipStoreController",function(){this.ships=ships,this.players=players}),app.controller("TechPointsController",function(){this.ships=ships,this.players=players,this.shouldShowNext=!1,this.showNext=function(){0===panel1count&&(this.shouldShowNext=!0)}});var cargo=1,cabin=2,laser=4,launch=5,Screen=8,tp=6,gt=2,ut=1,m=.5,sixCost=18,nineCost=36,buttonsClicked=0;